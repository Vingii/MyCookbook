// <auto-generated> This file has been auto generated by EF Core Power Tools. </auto-generated>
#nullable disable
using MyCookbook.Utils;
using System.ComponentModel.DataAnnotations.Schema;

namespace MyCookbook.Data.CookbookDatabase
{
    public partial class Recipe
    {
        public Recipe()
        {
            Ingredients = new HashSet<Ingredient>();
            Steps = new HashSet<Step>();
        }

        public int Id { get; set; }
        public string UserName { get; set; }
        public string Name { get; set; }
        public string Category { get; set; }
        public int? Duration { get; set; }
        public int Servings { get; set; }
        public DateTime? LastCooked { get; set; }
        public Guid Guid { get; set; }

        public virtual ICollection<Ingredient> Ingredients { get; set; }
        public virtual ICollection<Step> Steps { get; set; }

        [NotMapped]
        public string DurationText
        {
            get
            {
                if (Duration == null) return "";

                var span = TimeSpan.FromMinutes(Duration ?? 0);
                return $"{Math.Floor(span.TotalHours)}:{(span.Minutes < 10 ? "0" : "")}{span.Minutes}";
            }

            set
            {
                Duration = DateTimeUtils.AsMinutes(value);
            }
        }

        public Recipe Clone()
        {
            return new Recipe()
            {
                Name = Name,
                Category = Category,
                Duration = Duration,
                Servings = Servings,
                LastCooked = LastCooked,
                Guid = Guid.NewGuid()
            };
        }
    }
}